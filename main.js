(()=>{var t={705:(t,e,n)=>{var r=n(639).Symbol;t.exports=r},636:(t,e,n)=>{var r=n(545),o=n(694),a=n(469),s=n(144),c=n(776),l=n(719),i=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),u=!n&&o(t),d=!n&&!u&&s(t),p=!n&&!u&&!d&&l(t),m=n||u||d||p,f=m?r(t.length,String):[],g=f.length;for(var v in t)!e&&!i.call(t,v)||m&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,g))||f.push(v);return f}},932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},151:(t,e,n)=>{var r=n(278),o=n(480);t.exports=function(t){return o(r(t))}},239:(t,e,n)=>{var r=n(705),o=n(607),a=n(333),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?o(t):a(t)}},454:(t,e,n)=>{var r=n(239),o=n(5);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},749:(t,e,n)=>{var r=n(239),o=n(780),a=n(5),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&o(t.length)&&!!s[r(t)]}},280:(t,e,n)=>{var r=n(726),o=n(916),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},877:t=>{var e=Math.floor,n=Math.random;t.exports=function(t,r){return t+e(n()*(r-t+1))}},127:(t,e,n)=>{var r=n(480),o=n(628);t.exports=function(t){return r(o(t))}},545:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},518:t=>{t.exports=function(t){return function(e){return t(e)}}},415:(t,e,n)=>{var r=n(932);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},278:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},957:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},607:(t,e,n)=>{var r=n(705),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[c]=n:delete t[c]),o}},776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},726:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},916:(t,e,n)=>{var r=n(569)(Object.keys,Object);t.exports=r},167:(t,e,n)=>{t=n.nmd(t);var r=n(957),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o&&r.process,c=function(){try{return a&&a.require&&a.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=c},333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},639:(t,e,n)=>{var r=n(957),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();t.exports=a},480:(t,e,n)=>{var r=n(877);t.exports=function(t,e){var n=-1,o=t.length,a=o-1;for(e=void 0===e?o:e;++n<e;){var s=r(n,a),c=t[s];t[s]=t[n],t[n]=c}return t.length=e,t}},694:(t,e,n)=>{var r=n(454),o=n(5),a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!c.call(t,"callee")};t.exports=l},469:t=>{var e=Array.isArray;t.exports=e},612:(t,e,n)=>{var r=n(560),o=n(780);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},144:(t,e,n)=>{t=n.nmd(t);var r=n(639),o=n(62),a=e&&!e.nodeType&&e,s=a&&t&&!t.nodeType&&t,c=s&&s.exports===a?r.Buffer:void 0,l=(c?c.isBuffer:void 0)||o;t.exports=l},560:(t,e,n)=>{var r=n(239),o=n(218);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},719:(t,e,n)=>{var r=n(749),o=n(518),a=n(167),s=a&&a.isTypedArray,c=s?o(s):r;t.exports=c},674:(t,e,n)=>{var r=n(636),o=n(280),a=n(612);t.exports=function(t){return a(t)?r(t):o(t)}},983:(t,e,n)=>{var r=n(151),o=n(127),a=n(469);t.exports=function(t){return(a(t)?r:o)(t)}},62:t=>{t.exports=function(){return!1}},628:(t,e,n)=>{var r=n(415),o=n(674);t.exports=function(t){return null==t?[]:r(t,o(t))}},82:()=>{console.log("Привет, проверяющий:)\n\nПрошу обратить внимание, что в игре реализована проверка на генерацию решаемых вариантов, для удобства проверки на решаемость, можно воспользоваться puzzle-checker, разработанным одним из наших студентов:\nhttps://jerubrin.github.io/puzzle-checker/build/\n\nСсылка на ТЗ:\nhttps://github.com/rolling-scopes-school/tasks/blob/master/tasks/stage-1/dom-api/codejam-the-gem-puzzle.md\n\nСпасибо за проверку! Удачи в дальнейшем обучении :))\n")}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return t[r](a,a.exports,n),a.loaded=!0,a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";var t=n(983),e=n.n(t);function r(t,n){let o=e()(t),a=0,s=o.filter((t=>Number(t.dataset.number)!==o.length));for(let t=0;t<s.length;t++)a+=s.slice(0,t).filter((e=>Number(s[t].dataset.number)<e.dataset.number)).length;a%2==0?(P(o),R(o,n)):r(t,n)}function o(t,n){let r,a=e()(t);a.forEach(((t,e)=>{Number(t.dataset.number)===a.length&&(r=Math.floor(e/n))}));let s=0,c=a.filter((t=>Number(t.dataset.number)!==a.length));for(let t=0;t<c.length;t++)s+=c.slice(0,t).filter((e=>Number(c[t].dataset.number)<e.dataset.number)).length;(s+r)%2!=0?(P(a),R(a,n)):o(t,n)}let a=0;function s(t,e){const{emptyElementRow:n,emptyElementColumn:r}=(t=>{let e,n;for(let r=0;r<t.length;r++)for(let o=0;o<t[r].length;o++)Number(t[r][o].dataset.number)===t.length**2&&(e=r,n=o);return{emptyElementRow:e,emptyElementColumn:n}})(e);if(t.classList.contains("element"))for(let o=0;o<e.length;o++)for(let s=0;s<e[o].length;s++)if(t.dataset.number===e[o][s].dataset.number&&(o===n-1&&s===r||o===n&&s===r-1||o===n&&s===r+1||o===n+1&&s===r)){const t=e[o][s];e[o][s]=e[n][r],e[n][r]=t,a++,document.querySelector(".timer").textContent=`${a}`,y.play(),c(e)&&(V(a),K(a))}J(e)}function c(t){let e=[];for(let n=0;n<t.length**2;n++)e.push(n+1);return t.flat().every(((t,n)=>Number(t.dataset.number)===e[n]))}function l(){a=0,document.querySelector(".timer").textContent=`${a}`}const i=n.p+"assets/move.mp3";let u,d=4,p=16,m=4,f=[],g=[],v=0,b=0,y=new Audio(i),x=!0;y.volume=.7;let h=[];const S=["Start","Pause","Sound OFF"],j=["Results","Save","Saved game"],E=document.createElement("div");E.classList.add("wrapper"),document.querySelector("body").append(E);const C=document.createElement("div");C.classList.add("wrapper-control-buttons");for(let t=0;t<S.length;t++){let e=document.createElement("button");e.classList.add("control-buttons"),e.textContent=S[t],e.id=S[t],C.append(e)}E.append(C);const $=document.createElement("div");$.classList.add("timer-wrapper");const L=document.createElement("div");L.classList.add("timer"),L.textContent="0",$.append(L);const z=document.createElement("div");z.classList.add("timer");const I=document.createElement("span");I.textContent="00",z.append(I);const O=document.createElement("span");O.textContent=":",z.append(O);const w=document.createElement("span");w.textContent="00",z.append(w),$.append(z),E.append($);const A=document.createElement("div");A.classList.add("box"),E.append(A);const N=document.createElement("div");N.classList.add("message-back"),A.append(N);const T=document.createElement("p");T.classList.add("message"),A.append(T);const k=document.createElement("div");k.classList.add("wrapper-control-buttons");for(let t=0;t<j.length;t++){let e=document.createElement("button");e.classList.add("control-buttons"),e.textContent=j[t],e.id=j[t],k.append(e)}E.append(k);const F=document.createElement("div");F.classList.add("wrapper-for-size");for(let t=3;t<=8;t++){const e=document.createElement("button");e.textContent=`${t} x ${t}`,e.classList.add("button-size"),e.setAttribute("data-size",`${t}`),F.append(e)}function P(t){for(let e=0;e<t.length;e++)A.append(t[e])}function M(t){t.dataTransfer.clearData(),t.target.style.opacity="0.5",t.dataTransfer.setData("text/plain",t.target.dataset.number)}function q(t){t.target.style.opacity="1"}function B(t){const e=t.dataTransfer.getData("text"),n=document.querySelector(`div[data-number="${e}"]`);n.style.transition="none",s(n,g)}function D(t,e){for(let n=0;n<t;n++){let t=document.createElement("div");t.classList.add("element",`element-${e}`),t.textContent=`${n+1}`,t.setAttribute("data-number",n+1),t.draggable="true",t.addEventListener("dragstart",M),t.addEventListener("dragend",q),f.push(t)}f[f.length-1].draggable="",f[f.length-1].addEventListener("drop",B),P(f)}function U(t){t.forEach((t=>{t.remove()})),g=[],f=[]}function R(t,e){let n=[];for(let r=0;r<t.length;r++)r<d?(n.push(t[r]),r===t.length-1&&g.push(n)):(g.push(n),n=[],d+=e,r-=1);J(g)}function J(t){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)Number(t[e][n].dataset.number)===t[e].length**2&&(t[e][n].style.opacity="0",t[e][n].style.cursor="default"),setTimeout((()=>{t[e][n].style.transform=`translate(${100*n}%, ${100*e}%)`}))}E.append(F),D(p,d),R(f,m);const G=document.createElement("div");function _(){v++,v<60?w.textContent=`${String(v).padStart(2,"0")}`:(v=60)&&(v=0,w.textContent=`${String(v).padStart(2,"0")}`,b++,b<60?I.textContent=`${String(b).padStart(2,"0")}`:(b=60)&&(b=0,I.textContent=`${String(b).padStart(2,"0")}`))}function H(){clearInterval(u),v=0,b=0,w.textContent="00",I.textContent="00",l()}function V(t){setTimeout((()=>{N.style.zIndex="1",T.style.zIndex="2",T.textContent=`Hooray! You solved the puzzle in ${String(b).padStart(2,"0")}:${String(v).padStart(2,"0")} and ${t} moves!`,w.textContent=`${String(v).padStart(2,"0")}`,I.textContent=`${String(b).padStart(2,"0")}`}),300),setTimeout((()=>{T.textContent="Press Start for a new Game",H(),l()}),4e3)}function W(){N.style.zIndex="-1",T.style.zIndex="-1"}function Y(){N.style.zIndex="1",T.style.zIndex="2",T.textContent="Press Start for a new Game"}function K(t){let e={size:`${m} x ${m}`,moves:t,time:60*Number(b)+Number(v)};h.push(e),localStorage.setItem("results-sk",JSON.stringify(h))}const Q=document.createElement("div");A.addEventListener("dragover",(function(t){t.preventDefault(),t.dataTransfer.dropEffect="move"})),window.addEventListener("load",(function(){const t=localStorage.getItem("results-sk");t&&(h=JSON.parse(t))})),window.addEventListener("load",Y),F.addEventListener("click",(function(t){Y(),t.target.dataset.size&&(d=Number(`${t.target.dataset.size}`),p=d*d,m=d,U(f),D(p,d),R(f,m),l(),H())})),C.addEventListener("click",(function(t){if("Start"===t.target.id&&m%2!=0&&(W(),d=m,g=[],r(f,m),l(),H(),u=setInterval(_,1e3)),"Start"===t.target.id&&m%2==0&&(W(),d=m,g=[],o(f,m),l(),H(),u=setInterval(_,1e3)),"Pause"===t.target.id){if(c(g))return!1;clearInterval(u),G.classList.remove("message-result-close"),G.classList.add("message-result"),G.style.justifyContent="center",G.textContent="PAUSE",document.querySelector("body").append(G)}"Sound OFF"===t.target.id&&(x?(t.target.textContent="Sound ON",y.muted=!0):(t.target.textContent="Sound OFF",y.muted=!1),x=!x)})),k.addEventListener("click",(function(t){if("Save"===t.target.id&&(clearInterval(u),c(g)?(T.textContent="Nothing to save",setTimeout((()=>{N.style.zIndex="-1",T.style.zIndex="-1",Y()}),1e3)):(function(t,e,n,r){let o=n.flat();for(let t=0;t<o.length;t++)o[t]=Number(o[t].dataset.number);const s={moves:a,minutes:t,seconds:e,game:o,size:r};localStorage.setItem("save-game-sk",JSON.stringify(s))}(b,v,g,m),N.style.zIndex="1",T.style.zIndex="2",T.textContent="This game is saved",setTimeout((()=>{N.style.zIndex="-1",T.style.zIndex="-1",u=setInterval(_,1e3)}),1e3))),"Saved game"===t.target.id){if(!localStorage.getItem("save-game-sk"))return!1;clearInterval(u),u=setInterval(_,1e3),N.style.zIndex="-1",T.style.zIndex="-1",function(){if(localStorage.getItem("save-game-sk")){const e=JSON.parse(localStorage.getItem("save-game-sk"));I.textContent=`${String(e.minutes).padStart(2,"0")}`,w.textContent=`${String(e.seconds).padStart(2,"0")}`,L.textContent=`${e.moves}`;let n=e.game;d=e.size,m=e.size,b=e.minutes,v=e.seconds,t=e.moves,a=t,U(f),function(t,e){for(let n=0;n<t.length;n++){let r=document.createElement("div");r.classList.add("element",`element-${e}`),r.textContent=`${t[n]}`,r.setAttribute("data-number",t[n]),r.draggable="true",r.addEventListener("dragstart",M),r.addEventListener("dragend",q),f.push(r)}for(let e=0;e<f.length;e++)Number(f[e].dataset.number)===t.length&&(f[e].draggable="",f[e].addEventListener("drop",B));P(f)}(n,e.size),R(f,e.size)}var t}()}"Results"===t.target.id&&function(){W(),clearInterval(u),Q.textContent="",Q.classList.remove("message-result-close"),Q.classList.add("message-result");const t=h.sort(((t,e)=>t.time-e.time));if(t.length>0){const e=document.createElement("p");if(e.textContent="Best results:",e.style.paddingTop="140px",Q.append(e),Q.style.justifyContent="start",t.length<10)for(let e=0;e<t.length;e++){let n=Math.trunc(t[e].time/60),r=t[e].time-60*n;const o=document.createElement("p");o.textContent=`${e+1}. Size: ${t[e].size}, Time: ${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}, Moves: ${t[e].moves}`,Q.append(o)}else for(let e=0;e<10;e++){let n=Math.trunc(t[e].time/60),r=t[e].time-60*n;const o=document.createElement("p");o.textContent=`${e+1}. Size: ${t[e].size}, Time: ${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}, Moves: ${t[e].moves}`,Q.append(o)}}else{const t=document.createElement("div");t.textContent="No saved results",Q.style.justifyContent="center",Q.append(t)}document.querySelector("body").append(Q)}()})),A.addEventListener("click",(function(t){t.target.style.transition="all 0.3s",s(t.target,g)})),Q.addEventListener("click",(function(){Q.classList.remove("message-result"),Q.classList.add("message-result-close"),c(g)?Y():u=setInterval(_,1e3)})),G.addEventListener("click",(function(){G.classList.remove("message-result"),G.classList.add("message-result-close"),u=setInterval(_,1e3)})),n(82)})()})();